-- This is an example site configuration for Gluon v2015.1+ with FF-KBU
--
-- Take a look at the documentation located at
-- http://gluon.readthedocs.org/ for details.
--
-- This configuration will not work as it. You're required to make
-- community specific changes to it!
{

  -- Used for SSH access
 authorized_keys = { 'ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAm91X3/MVBaiQo3sMXK+X5CWonsyml9ZM5N0MV32yplCyEZnMILt//A14DlJal/YODqlo19JDR6y24Q3lwErBmdfiK1CmanJVIC/osZIEDHX98nuilzyEsBpQZ0WRFnbGUHHu6VFTCEJOimMJMo1HZVdCAWL3yER05k9Wvz9GIXpOUh9VkD53nNBJhwjA+t5RJPqOYC4NJPQDorr1USRgxg+GpEJeM17+ixXG4ZPUchf7h/SDJcvaNnZbROhBKCKYhKCnW5mAR8itocXQkTNDTLjTPB1Ti9eE4K7hik9w2Oh/4IgI1KHRnmp26f7/KqPZxOi6m2b3S5AsfHffR1QTRQ== rsa-key-20150120',
                       },
 
  -- Used for generated hostnames, e.g. freifunk-abcdef123456. (optional)
 hostname_prefix = 'su',

  -- Name of the community.
  site_name = 'Freifunk Siegburg',

  -- Shorthand of the community.
  site_code = 'su-su',
  opkg_repo = 'http://openwrt.draic.info/barrier_breaker/14.07/%S/packages',
  -- Prefixes used within the mesh. Both are required.
  prefix4 = '10.111.0.0/16',
  prefix6 = 'fda0:747e:ab29:2241::/64',

  -- Timezone of your community.
  -- See http://wiki.openwrt.org/doc/uci/system#time_zones
    timezone = 'CET-1CEST,M3.5.0,M10.5.0/3', -- Europe/Berlin

  -- List of NTP servers in your community.
  -- Must be reachable using IPv6!
  ntp_servers = {'ptbtime1.ptb.de','2.pool.ntp.org'},

  -- Wireless regulatory domain of your community.
  regdom = 'DE',

  -- Wireless configuration for 2.4 GHz interfaces.
  wifi24 = {


    -- Wireless channel.
    channel = 5,

    -- Specifies the channel width in 802.11n and 802.11ac mode.
    -- Possible values are:
    -- HT20 (single 20MHz channel),
    -- HT40- (2x 20MHz channels, secondary below)
    -- HT40+ (2x 20MHz channels, secondary above)
    htmode = 'HT40-',

    -- ESSID used for client network.
    ap = {
      ssid = 'Freifunk',
      -- disabled = true, (optional)
    },
	ibss = {
		ssid = 'su-ff-mesh',
		bssid = '02:74:05:d0:4f:20',
		mcast_rate = 12000,
    },
  },

  -- Wireless configuration for 5 GHz interfaces.
  -- This should be equal to the 2.4 GHz variant, except
  -- for channel and htmode.
  wifi5 = {


    channel = 44,
    htmode = 'HT40+',


    ap = {
      ssid = 'Freifunk',
    },
   ibss = {
		ssid = 'su-ff-mesh',
		bssid = '02:74:05:d0:4f:20',
		mcast_rate = 12000,
    },
      },
  -- The next node feature allows clients to always reach the node it is
  -- connected to using a known IP address.
  next_node = {
    -- anycast IPs of all nodes
    ip4 = '10.111.0.1',


    ip6 = 'fda0:747e:ab29:2241::1',

    -- anycast MAC of all nodes
    mac = '04:74:05:d0:4f:aa',
  },

  -- Refer to http://fastd.readthedocs.org/en/latest/ to better understand
  -- what these options do.
  fastd_mesh_vpn = {
    -- List of crypto-methods to use.
    methods = {
            'salsa2012+umac',
            'salsa2012+gmac'
        },

     enabled = true,
    -- configurable = true,
    mtu = 1364,
    groups = {
      backbone = {


        -- Limit number of connected peers to reduce bandwidth.
        limit = 2,
        -- List of peers.
          peers = {
                    wupper0 = {
                        key = 'e52daa654abcf5c20c5b7a74b5145f70a7491435c6ef334ae352e4f19c00e8f5',
                        remotes = {'"0.su.wupper.ffrl.de" port 53757'},
                  },
                    wupper1 = {
                        key = '6eae041199ee627689bfa026afbd8a9ab299eca8aed4144321d098cffd62668e',
                        remotes = {'"1.su.wupper.ffrl.de" port 53757'},

                    },
                    wupper2 = {
                        key = 'b7f319d59d8383ba813c3503416bca45f70852e4d207b1743bb6cdca1e30d9f5',
                        remotes = {'"2.su.wupper.ffrl.de" port 53757'},

                    },
                    wupper3 = {
                        key = 'c8f3d1d10b0d6389e39c3c3cb08adfa3123e821fd5bfd6262d2161d80ee4b06c',
                        remotes = {'"3.su.wupper.ffrl.de" port 53757'},

                    },
                    wupper4 = {
                        key = '5e7fa122990dbc34b8cae7ece2cd4ef919d3f8c23a674b7bbcf05bfebe6a6e8a',
                        remotes = {'"4.su.wupper.ffrl.de" port 53757'},

                    },
        },

        -- Optional: nested peer groups
        -- groups = {
        --   backbone_sub = {
        --     ...
        --   },
        --   ...
        -- },
      },
      -- Optional: additional peer groups, possibly with other limits
      -- backbone2 = {
      --   ...
      -- },
    },
  
    -- Bandwidth limiting
      bandwidth_limit = {
      -- The bandwidth limit can be enabled by default here.
      enabled = false,

      -- Default upload limit (kbit/s).
      egress = 200,

      -- Default download limit (kbit/s).
      ingress = 3000,
    },
  },
   autoupdater = {
    -- Default branch. Don't forget to set GLUON_BRANCH when building!
    branch = 'experimental',
    enabled = false,
    -- List of branches. You may define multiple branches.
    branches = {
       
      stable = {
        name = 'stable',
        -- List of mirrors to fetch images from. IPv6 required!
        mirrors = {	'http://[2001:67c:20a0:b100:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b101:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b102:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b103:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b104:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b105:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b106:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b107:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b108:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					'http://[2001:67c:20a0:b109:ba27:ebff:feed:e7bc]/firmware/stable/sysupgrade',
					},
        -- Number of good signatures required.
        -- Have multiple maintainers sign your build and only
        -- accept it when a sufficient number of them have
        -- signed it.
        good_signatures = 1,
        -- List of public keys of maintainers.
        pubkeys = {
                'de5cfc182b9f29a9d0d2cce23d5e26629151d7cb7136ed7e3e3a968a0af26dd4', -- Delta
        },
      },
            experimental = {
        name = 'experimental',
        -- List of mirrors to fetch images from. IPv6 required!
        mirrors = {	'http://[2001:67c:20a0:b100:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b101:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b102:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b103:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b104:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b105:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b106:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b107:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b108:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					'http://[2001:67c:20a0:b109:ba27:ebff:feed:e7bc]/firmware/experimental/sysupgrade',
					},
        -- Number of good signatures required.
        -- Have multiple maintainers sign your build and only
        -- accept it when a sufficient number of them have
        -- signed it.
        good_signatures = 1,

        -- List of public keys of maintainers.
        pubkeys = {
                'de5cfc182b9f29a9d0d2cce23d5e26629151d7cb7136ed7e3e3a968a0af26dd4', -- Delta
        },
      },
    },
  },
-- Node roles
   roles = {
     default = 'node',
     list = {
       'node',
       'test',
       'backbone',
       'service',
     },
   },
  -- Skip setup mode (config mode) on first boot
   setup_mode = {
   skip = true,
   },
}
